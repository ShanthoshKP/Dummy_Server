<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no">
    <title>Aircraft</title>
    <link rel="stylesheet" href="assets/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,700">
    <link rel="stylesheet" href="assets/css/Footer-Basic.css">
    <link rel="stylesheet" href="assets/css/Header-Blue.css">
    <link rel="stylesheet" href="assets/css/Login-Form-Clean.css">
    <link rel="stylesheet" href="assets/css/Projects-Horizontal.css">
    <link rel="stylesheet" href="assets/css/Registration-Form-with-Photo.css">
    <link rel="stylesheet" href="assets/css/styles.css">
</head>

<body>

    <section class="register-photo">
        <div class="form-container">
            <div class="image-holder" style="background: url(&quot;assets/img/A3images.png&quot;) center / cover;"></div>
            <form method="post">
                <h2 class="text-center"><strong>Create</strong> an account.</h2>
                <div class="mb-3"><input class="form-control" type="text" name="Company" placeholder="Company Name"><input class="form-control" type="email" placeholder="Email" name="email"><input class="form-control" type="text" placeholder="Service" name="Service_Provider"></div>
                <div class="mb-3"><input class="form-control" type="password" name="password" placeholder="Password"></div>
                <div class="mb-3">
                    <div class="form-check"><label class="form-check-label"><input class="form-check-input" type="checkbox">I agree to the license terms.</label></div>
                </div>
                <div class="mb-3"><button class="btn btn-primary d-block w-100" type="submit">Sign Up</button></div>
		    
		
                
   
                <script src="https://cdn.jsdelivr.net/npm/web3@1.2.8/dist/web3.js"></script>

    <script>	
	
	var account;
	window.addEventListener('load', async () => {
		console.log("In Event Listener");
	
		if (typeof window.ethereum !== 'undefined') { 
			console.log("MetaMask is Available :) !"); 
			}
			
		// Modern DApp browsers
		if (window.ethereum) {
			window.web3 = new Web3(ethereum);
						
			// To Capture the account details from MetaMask
			const accounts = await ethereum.enable();
			account = accounts[0];
				
			}
			console.log(account);

                                abi = [
	{
		"inputs": [
			{
				"internalType": "string",
				"name": "companyname",
				"type": "string"
			},
			{
				"internalType": "string",
				"name": "email",
				"type": "string"
			},
			{
				"internalType": "string",
				"name": "servicename",
				"type": "string"
			},
			{
				"internalType": "string",
				"name": "password",
				"type": "string"
			}
		],
		"name": "store_company",
		"outputs": [],
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"inputs": [],
		"stateMutability": "nonpayable",
		"type": "constructor"
	}
];

contractaddress = '0x16452E6E5F63628d05F0996Da74A17AB94F17B37';
var myContract = new web3.eth.Contract(abi,contractaddress, {from: account, gasPrice: '4000000000', gas: '8000000'});
							
var result = myContract.methods.store(44).send(function (err, result) {
				
		console.log("Result: ", result);
			if (result) { console.log(result); }					
		});			

var result = myContract.methods.retrieve().call(function (err, result) {
				
		console.log("Result: ", result);
			if (result) { console.log(result[0]); }					
		});			
	});
		
		
    </script>	


            </form>
        </div>
    </section>
    <script src="assets/bootstrap/js/bootstrap.min.js"></script>

    <a class="already" href="Login.html">You already have an account? Login here.</a>

</body>

</html>
